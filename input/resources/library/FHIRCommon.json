{
  "resourceType": "Library",
  "id": "FHIRCommon",
  "extension": [ {
    "url": "http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem",
    "valueReference": {
      "reference": "Device/cqf-tooling"
    }
  } ],
  "url": "http://somewhere.org/fhir/uv/onccovid19ml/Library/FHIRCommon",
  "version": "1.0.0",
  "name": "FHIRCommon",
  "content": [ {
    "contentType": "text/cql",
    "data": "bGlicmFyeSBGSElSQ29tbW9uIHZlcnNpb24gJzEuMC4wJwoKdXNpbmcgRkhJUiB2ZXJzaW9uICc0LjAuMScKCmluY2x1ZGUgRkhJUkhlbHBlcnMgdmVyc2lvbiAnNC4xLjAwMCcKCmNvZGVzeXN0ZW0gIkxPSU5DIjogJ2h0dHA6Ly9sb2luYy5vcmcnCmNvZGVzeXN0ZW0gIlNOT01FRENUIjogJ2h0dHA6Ly9zbm9tZWQuaW5mby9zY3QnCmNvZGVzeXN0ZW0gIkNWWCI6ICdodHRwOi8vaGw3Lm9yZy9maGlyL3NpZC9jdngnCmNvZGVzeXN0ZW0gIkFjdENvZGUiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS92My1BY3RDb2RlJwpjb2Rlc3lzdGVtICJSb2xlQ29kZSI6ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL3YzLVJvbGVDb2RlJwpjb2Rlc3lzdGVtICJEaWFnbm9zaXMgUm9sZSI6ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL2RpYWdub3Npcy1yb2xlJwpjb2Rlc3lzdGVtICJSZXF1ZXN0SW50ZW50IjogJ2h0dHA6Ly9obDcub3JnL2ZoaXIvcmVxdWVzdC1pbnRlbnQnCmNvZGVzeXN0ZW0gIk1lZGljYXRpb25SZXF1ZXN0Q2F0ZWdvcnkiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9tZWRpY2F0aW9ucmVxdWVzdC1jYXRlZ29yeScKY29kZXN5c3RlbSAiQ29uZGl0aW9uQ2xpbmljYWxTdGF0dXNDb2RlcyI6ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL2NvbmRpdGlvbi1jbGluaWNhbCcKY29kZXN5c3RlbSAiQ29uZGl0aW9uVmVyaWZpY2F0aW9uU3RhdHVzQ29kZXMiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9jb25kaXRpb24tdmVyLXN0YXR1cycKY29kZXN5c3RlbSAiQWxsZXJneUludG9sZXJhbmNlQ2xpbmljYWxTdGF0dXNDb2RlcyI6ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL2FsbGVyZ3lpbnRvbGVyYW5jZS1jbGluaWNhbCcKY29kZXN5c3RlbSAiQWxsZXJneUludG9sZXJhbmNlVmVyaWZpY2F0aW9uU3RhdHVzQ29kZXMiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9hbGxlcmd5aW50b2xlcmFuY2UtdmVyaWZpY2F0aW9uJwpjb2Rlc3lzdGVtICJPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMiOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9vYnNlcnZhdGlvbi1jYXRlZ29yeScKY29kZXN5c3RlbSAiVVNDb3JlT2JzZXJ2YXRpb25DYXRlZ29yeSI6ICdodHRwOi8vaGw3Lm9yZy9maGlyL3VzL2NvcmUvQ29kZVN5c3RlbS91cy1jb3JlLW9ic2VydmF0aW9uLWNhdGVnb3J5Jwpjb2Rlc3lzdGVtICJPYnNlcnZhdGlvblN0YXR1c0NvZGVzIjogJ2h0dHA6Ly9obDcub3JnL2ZoaXIvb2JzZXJ2YXRpb24tc3RhdHVzJwpjb2Rlc3lzdGVtICJDb25kaXRpb25DYXRlZ29yeSI6ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL2NvbmRpdGlvbi1jYXRlZ29yeScKY29kZXN5c3RlbSAiVVNDb3JlQ29uZGl0aW9uQ2F0ZWdvcnkiOiAnaHR0cDovL2hsNy5vcmcvZmhpci91cy9jb3JlL0NvZGVTeXN0ZW0vY29uZGl0aW9uLWNhdGVnb3J5Jwpjb2Rlc3lzdGVtICJDREMgUmFjZSBhbmQgRXRobmljaXR5IENvZGVzIjogJ3VybjpvaWQ6Mi4xNi44NDAuMS4xMTM4ODMuNi4yMzgnCmNvZGVzeXN0ZW0gIkNvbW11bmljYXRpb25DYXRlZ29yeUNvZGVTeXN0ZW0iOiAnaHR0cDovL3Rlcm1pbm9sb2d5LmhsNy5vcmcvQ29kZVN5c3RlbS9jb21tdW5pY2F0aW9uLWNhdGVnb3J5Jwpjb2Rlc3lzdGVtICJJZGVudGlmaWVyVHlwZSI6ICdodHRwOi8vdGVybWlub2xvZ3kuaGw3Lm9yZy9Db2RlU3lzdGVtL3YyLTAyMDMnCgpjb2RlICJNZWRpY2FsUmVjb3JkTnVtYmVyIjogJ01SJyBmcm9tICJJZGVudGlmaWVyVHlwZSIgZGlzcGxheSAnTWVkaWNhbCByZWNvcmQgbnVtYmVyJwoKY29kZSAiQmlydGhkYXRlIjogJzIxMTEyLTgnIGZyb20gIkxPSU5DIiBkaXNwbGF5ICdCaXJ0aCBkYXRlJwpjb2RlICJEZWFkIjogJzQxOTA5OTAwOScgZnJvbSAiU05PTUVEQ1QiIGRpc3BsYXkgJ0RlYWQnCmNvZGUgIkVSIjogJ0VSJyBmcm9tICJSb2xlQ29kZSIgZGlzcGxheSAnRW1lcmdlbmN5IHJvb20nCmNvZGUgIklDVSI6ICdJQ1UnIGZyb20gIlJvbGVDb2RlIiBkaXNwbGF5ICdJbnRlbnNpdmUgY2FyZSB1bml0Jwpjb2RlICJCaWxsaW5nIjogJ2JpbGxpbmcnIGZyb20gIkRpYWdub3NpcyBSb2xlIiBkaXNwbGF5ICdCaWxsaW5nJwoKLy8gRW5jb3VudGVyIENsYXNzIENvZGVzCmNvZGUgImFtYnVsYXRvcnkiOiAnQU1CJyBmcm9tIEFjdENvZGUgZGlzcGxheSAnYW1idWxhdG9yeScKY29kZSAiZW1lcmdlbmN5IjogJ0VNRVInIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdlbWVyZ2VuY3knCmNvZGUgImZpZWxkIjogJ0ZMRCcgZnJvbSBBY3RDb2RlIGRpc3BsYXkgJ2ZpZWxkJwpjb2RlICJob21lIGhlYWx0aCI6ICdISCcgZnJvbSBBY3RDb2RlIGRpc3BsYXkgJ2hvbWUgaGVhbHRoJwpjb2RlICJpbnBhdGllbnQgZW5jb3VudGVyIjogJ0lNUCcgZnJvbSBBY3RDb2RlIGRpc3BsYXkgJ2lucGF0aWVudCBlbmNvdW50ZXInCmNvZGUgImlucGF0aWVudCBhY3V0ZSI6ICdBQ1VURScgZnJvbSBBY3RDb2RlIGRpc3BsYXkgJ2lucGF0aWVudCBhY3V0ZScKY29kZSAiaW5wYXRpZW50IG5vbi1hY3V0ZSI6ICdOT05BQycgZnJvbSBBY3RDb2RlIGRpc3BsYXkgJ2lucGF0aWVudCBub24tYWN1dGUnCmNvZGUgIm9ic2VydmF0aW9uIGVuY291bnRlciI6ICdPQlNFTkMnIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdvYnNlcnZhdGlvbiBlbmNvdW50ZXInCmNvZGUgInByZS1hZG1pc3Npb24iOiAnUFJFTkMnIGZyb20gQWN0Q29kZSBkaXNwbGF5ICdwcmUtYWRtaXNzaW9uJwpjb2RlICJzaG9ydCBzdGF5IjogJ1NTJyBmcm9tIEFjdENvZGUgZGlzcGxheSAnc2hvcnQgc3RheScKY29kZSAidmlydHVhbCI6ICdWUicgZnJvbSBBY3RDb2RlIGRpc3BsYXkgJ1ZSJwoKLy8gQ29uZGl0aW9uIENhdGVnb3J5IENvZGVzCmNvZGUgInByb2JsZW0tbGlzdC1pdGVtIjogJ3Byb2JsZW0tbGlzdC1pdGVtJyBmcm9tICJDb25kaXRpb25DYXRlZ29yeSIgZGlzcGxheSAnUHJvYmxlbSBMaXN0IEl0ZW0nCmNvZGUgImVuY291bnRlci1kaWFnbm9zaXMiOiAnZW5jb3VudGVyLWRpYWdub3NpcycgZnJvbSAiQ29uZGl0aW9uQ2F0ZWdvcnkiIGRpc3BsYXkgJ0VuY291bnRlciBEaWFnbm9zaXMnCmNvZGUgImhlYWx0aC1jb25jZXJuIjogJ2hlYWx0aC1jb25jZXJuJyBmcm9tICJVU0NvcmVDb25kaXRpb25DYXRlZ29yeSIgZGlzcGxheSAnSGVhbHRoIENvbmNlcm4nCgovLyBDb25kaXRpb24gQ2xpbmljYWwgU3RhdHVzIENvZGVzIC0gQ29uc2lkZXIgdmFsdWUgc2V0cyBmb3IgdGhlc2UKY29kZSAiYWN0aXZlIjogJ2FjdGl2ZScgZnJvbSAiQ29uZGl0aW9uQ2xpbmljYWxTdGF0dXNDb2RlcyIKY29kZSAicmVjdXJyZW5jZSI6ICdyZWN1cnJlbmNlJyBmcm9tICJDb25kaXRpb25DbGluaWNhbFN0YXR1c0NvZGVzIgpjb2RlICJyZWxhcHNlIjogJ3JlbGFwc2UnIGZyb20gIkNvbmRpdGlvbkNsaW5pY2FsU3RhdHVzQ29kZXMiCmNvZGUgImluYWN0aXZlIjogJ2luYWN0aXZlJyBmcm9tICJDb25kaXRpb25DbGluaWNhbFN0YXR1c0NvZGVzIgpjb2RlICJyZW1pc3Npb24iOiAncmVtaXNzaW9uJyBmcm9tICJDb25kaXRpb25DbGluaWNhbFN0YXR1c0NvZGVzIgpjb2RlICJyZXNvbHZlZCI6ICdyZXNvbHZlZCcgZnJvbSAiQ29uZGl0aW9uQ2xpbmljYWxTdGF0dXNDb2RlcyIKCi8vIENvbmRpdGlvbiBWZXJpZmljYXRpb24gU3RhdHVzIENvZGVzIC0gQ29uc2lkZXIgdmFsdWUgc2V0cyBmb3IgdGhlc2UKY29kZSAidW5jb25maXJtZWQiOiAndW5jb25maXJtZWQnIGZyb20gQ29uZGl0aW9uVmVyaWZpY2F0aW9uU3RhdHVzQ29kZXMKY29kZSAicHJvdmlzaW9uYWwiOiAncHJvdmlzaW9uYWwnIGZyb20gQ29uZGl0aW9uVmVyaWZpY2F0aW9uU3RhdHVzQ29kZXMKY29kZSAiZGlmZmVyZW50aWFsIjogJ2RpZmZlcmVudGlhbCcgZnJvbSBDb25kaXRpb25WZXJpZmljYXRpb25TdGF0dXNDb2Rlcwpjb2RlICJjb25maXJtZWQiOiAnY29uZmlybWVkJyBmcm9tIENvbmRpdGlvblZlcmlmaWNhdGlvblN0YXR1c0NvZGVzCmNvZGUgInJlZnV0ZWQiOiAncmVmdXRlZCcgZnJvbSBDb25kaXRpb25WZXJpZmljYXRpb25TdGF0dXNDb2Rlcwpjb2RlICJlbnRlcmVkLWluLWVycm9yIjogJ2VudGVyZWQtaW4tZXJyb3InIGZyb20gQ29uZGl0aW9uVmVyaWZpY2F0aW9uU3RhdHVzQ29kZXMKCmNvZGUgImFsbGVyZ3ktYWN0aXZlIjogJ2FjdGl2ZScgZnJvbSAiQWxsZXJneUludG9sZXJhbmNlQ2xpbmljYWxTdGF0dXNDb2RlcyIKY29kZSAiYWxsZXJneS1pbmFjdGl2ZSI6ICdpbmFjdGl2ZScgZnJvbSAiQWxsZXJneUludG9sZXJhbmNlQ2xpbmljYWxTdGF0dXNDb2RlcyIKY29kZSAiYWxsZXJneS1yZXNvbHZlZCI6ICdyZXNvbHZlZCcgZnJvbSAiQWxsZXJneUludG9sZXJhbmNlQ2xpbmljYWxTdGF0dXNDb2RlcyIKCi8vIEFsbGVyZ3kvSW50b2xlcmFuY2UgVmVyaWZpY2F0aW9uIFN0YXR1cyBDb2RlcyAtIENvbnNpZGVyIHZhbHVlIHNldHMgZm9yIHRoZXNlCmNvZGUgImFsbGVyZ3ktdW5jb25maXJtZWQiOiAndW5jb25maXJtZWQnIGZyb20gQWxsZXJneUludG9sZXJhbmNlVmVyaWZpY2F0aW9uU3RhdHVzQ29kZXMKY29kZSAiYWxsZXJneS1jb25maXJtZWQiOiAnY29uZmlybWVkJyBmcm9tIEFsbGVyZ3lJbnRvbGVyYW5jZVZlcmlmaWNhdGlvblN0YXR1c0NvZGVzCmNvZGUgImFsbGVyZ3ktcmVmdXRlZCI6ICdyZWZ1dGVkJyBmcm9tIEFsbGVyZ3lJbnRvbGVyYW5jZVZlcmlmaWNhdGlvblN0YXR1c0NvZGVzCgovLyBNZWRpY2F0aW9uUmVxdWVzdCBDYXRlZ29yeSBDb2Rlcwpjb2RlICJJbnBhdGllbnQiOiAnaW5wYXRpZW50JyBmcm9tICJNZWRpY2F0aW9uUmVxdWVzdENhdGVnb3J5IiBkaXNwbGF5ICdJbnBhdGllbnQnCmNvZGUgIk91dHBhdGllbnQiOiAnb3V0cGF0aWVudCcgZnJvbSAiTWVkaWNhdGlvblJlcXVlc3RDYXRlZ29yeSIgZGlzcGxheSAnT3V0cGF0aWVudCcKY29kZSAiQ29tbXVuaXR5IjogJ2NvbW11bml0eScgZnJvbSAiTWVkaWNhdGlvblJlcXVlc3RDYXRlZ29yeSIgZGlzcGxheSAnQ29tbXVuaXR5Jwpjb2RlICJEaXNjaGFyZ2UiOiAnZGlzY2hhcmdlJyBmcm9tICJNZWRpY2F0aW9uUmVxdWVzdENhdGVnb3J5IiBkaXNwbGF5ICdEaXNjaGFyZ2UnCgovLyBEaWFnbm9zaXMgUm9sZSBDb2Rlcwpjb2RlICJBRCI6ICdBRCcgZnJvbSAiRGlhZ25vc2lzIFJvbGUiIGRpc3BsYXkgJ0FkbWlzc2lvbiBkaWFnbm9zaXMnCmNvZGUgIkREIjogJ0REJyBmcm9tICJEaWFnbm9zaXMgUm9sZSIgZGlzcGxheSAnRGlzY2hhcmdlIGRpYWdub3NpcycKY29kZSAiQ0MiOiAnQ0MnIGZyb20gIkRpYWdub3NpcyBSb2xlIiBkaXNwbGF5ICdDaGllZiBjb21wbGFpbnQnCmNvZGUgIkNNIjogJ0NNJyBmcm9tICJEaWFnbm9zaXMgUm9sZSIgZGlzcGxheSAnQ29tb3JiaWRpdHkgZGlhZ25vc2lzJwpjb2RlICJwcmUtb3AiOiAncHJlLW9wJyBmcm9tICJEaWFnbm9zaXMgUm9sZSIgZGlzcGxheSAncHJlLW9wIGRpYWdub3NpcycKY29kZSAicG9zdC1vcCI6ICdwb3N0LW9wJyBmcm9tICJEaWFnbm9zaXMgUm9sZSIgZGlzcGxheSAncG9zdC1vcCBkaWFnbm9zaXMnCmNvZGUgImJpbGxpbmciOiAnYmlsbGluZycgZnJvbSAiRGlhZ25vc2lzIFJvbGUiIGRpc3BsYXkgJ2JpbGxpbmcgZGlhZ25vc2lzJwoKLy8gT2JzZXJ2YXRpb24gQ2F0ZWdvcnkgQ29kZXMKY29kZSAic29jaWFsLWhpc3RvcnkiOiAnc29jaWFsLWhpc3RvcnknIGZyb20gIk9ic2VydmF0aW9uQ2F0ZWdvcnlDb2RlcyIgZGlzcGxheSAnU29jaWFsIEhpc3RvcnknCmNvZGUgInZpdGFsLXNpZ25zIjogJ3ZpdGFsLXNpZ25zJyBmcm9tICJPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMiIGRpc3BsYXkgJ1ZpdGFsIFNpZ25zJwpjb2RlICJpbWFnaW5nIjogJ2ltYWdpbmcnIGZyb20gIk9ic2VydmF0aW9uQ2F0ZWdvcnlDb2RlcyIgZGlzcGxheSAnSW1hZ2luZycKY29kZSAibGFib3JhdG9yeSI6ICdsYWJvcmF0b3J5JyBmcm9tICJPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMiIGRpc3BsYXkgJ0xhYm9yYXRvcnknCmNvZGUgInByb2NlZHVyZSI6ICdwcm9jZWR1cmUnIGZyb20gIk9ic2VydmF0aW9uQ2F0ZWdvcnlDb2RlcyIgZGlzcGxheSAnUHJvY2VkdXJlJwpjb2RlICJzdXJ2ZXkiOiAnc3VydmV5JyBmcm9tICJPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMiIGRpc3BsYXkgJ1N1cnZleScKY29kZSAiZXhhbSI6ICdleGFtJyBmcm9tICJPYnNlcnZhdGlvbkNhdGVnb3J5Q29kZXMiIGRpc3BsYXkgJ0V4YW0nCmNvZGUgInRoZXJhcHkiOiAndGhlcmFweScgZnJvbSAiT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzIiBkaXNwbGF5ICdUaGVyYXB5Jwpjb2RlICJhY3Rpdml0eSI6ICdhY3Rpdml0eScgZnJvbSAiT2JzZXJ2YXRpb25DYXRlZ29yeUNvZGVzIiBkaXNwbGF5ICdBY3Rpdml0eScKY29kZSAiY2xpbmljYWwtdGVzdCI6ICdjbGluaWNhbC10ZXN0JyBmcm9tICJVU0NvcmVPYnNlcnZhdGlvbkNhdGVnb3J5IiBkaXNwbGF5ICdDbGluaWNhbCBUZXN0JwoKLy8gT2JzZXJ2YXRpb24gU3RhdHVzIENvZGVzCmNvZGUgIm9ic2VydmF0aW9uLXJlZ2lzdGVyZWQiOiAncmVnaXN0ZXJlZCcgZnJvbSAiT2JzZXJ2YXRpb25TdGF0dXNDb2RlcyIgZGlzcGxheSAnUmVnaXN0ZXJlZCcKY29kZSAib2JzZXJ2YXRpb24tcHJlbGltaW5hcnkiOiAncHJlbGltaW5hcnknIGZyb20gIk9ic2VydmF0aW9uU3RhdHVzQ29kZXMiIGRpc3BsYXkgJ1ByZWxpbWluYXJ5Jwpjb2RlICJvYnNlcnZhdGlvbi1maW5hbCI6ICdmaW5hbCcgZnJvbSAiT2JzZXJ2YXRpb25TdGF0dXNDb2RlcyIgZGlzcGxheSAnRmluYWwnCmNvZGUgIm9ic2VydmF0aW9uLWFtZW5kZWQiOiAnYW1lbmRlZCcgZnJvbSAiT2JzZXJ2YXRpb25TdGF0dXNDb2RlcyIgZGlzcGxheSAnQW1lbmRlZCcKY29kZSAib2JzZXJ2YXRpb24tY29ycmVjdGVkIjogJ2NvcnJlY3RlZCcgZnJvbSAiT2JzZXJ2YXRpb25TdGF0dXNDb2RlcyIgZGlzcGxheSAnQ29ycmVjdGVkJwpjb2RlICJvYnNlcnZhdGlvbi1jYW5jZWxsZWQiOiAnY2FuY2VsbGVkJyBmcm9tICJPYnNlcnZhdGlvblN0YXR1c0NvZGVzIiBkaXNwbGF5ICdDYW5jZWxsZWQnCmNvZGUgIm9ic2VydmF0aW9uLWVudGVyZWQtaW4tZXJyb3IiOiAnZW50ZXJlZC1pbi1lcnJvcicgZnJvbSAiT2JzZXJ2YXRpb25TdGF0dXNDb2RlcyIgZGlzcGxheSAnRW50ZXJlZCBpbiBFcnJvcicKY29kZSAib2JzZXJ2YXRpb24tdW5rbm93biI6ICd1bmtub3duJyBmcm9tICJPYnNlcnZhdGlvblN0YXR1c0NvZGVzIiBkaXNwbGF5ICdVbmtub3duJwoKY29udGV4dCBQYXRpZW50CgovKiBDYW5kaWRhdGVzIGZvciBGSElSQ29tbW9uICovCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gY29uZGl0aW9uIGhhcyBhIGNsaW5pY2FsIHN0YXR1cyBvZiBhY3RpdmUsIHJlY3VycmVuY2UsIG9yIHJlbGFwc2UKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0FjdGl2ZShjb25kaXRpb24gQ29uZGl0aW9uKToKICBjb25kaXRpb24uY2xpbmljYWxTdGF0dXMgfiAiYWN0aXZlIgogICAgb3IgY29uZGl0aW9uLmNsaW5pY2FsU3RhdHVzIH4gInJlY3VycmVuY2UiCiAgICBvciBjb25kaXRpb24uY2xpbmljYWxTdGF0dXMgfiAicmVsYXBzZSIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYWN0aXZlKGNvbmRpdGlvbnMgTGlzdDxDb25kaXRpb24+KToKICBjb25kaXRpb25zIEMKICAgIHdoZXJlIEMuY2xpbmljYWxTdGF0dXMgfiAiYWN0aXZlIgogICAgICBvciBDLmNsaW5pY2FsU3RhdHVzIH4gInJlY3VycmVuY2UiCiAgICAgIG9yIEMuY2xpbmljYWxTdGF0dXMgfiAicmVsYXBzZSIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNBbGxlcmd5QWN0aXZlKGFsbGVyZ3lJbnRvbGVyYW5jZSBBbGxlcmd5SW50b2xlcmFuY2UpOgogIGFsbGVyZ3lJbnRvbGVyYW5jZS5jbGluaWNhbFN0YXR1cyB+ICJhbGxlcmd5LWFjdGl2ZSIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYWxsZXJneUFjdGl2ZShhbGxlcmd5SW50b2xlcmFuY2VzIExpc3Q8QWxsZXJneUludG9sZXJhbmNlPik6CiAgYWxsZXJneUludG9sZXJhbmNlcyBBCiAgICB3aGVyZSBBLmNsaW5pY2FsU3RhdHVzIH4gImFsbGVyZ3ktYWN0aXZlIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0FsbGVyZ3lJbmFjdGl2ZShhbGxlcmd5SW50b2xlcmFuY2UgQWxsZXJneUludG9sZXJhbmNlKToKICBhbGxlcmd5SW50b2xlcmFuY2UuY2xpbmljYWxTdGF0dXMgfiAiYWxsZXJneS1pbmFjdGl2ZSIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYWxsZXJneUluYWN0aXZlKGFsbGVyZ3lJbnRvbGVyYW5jZXMgTGlzdDxBbGxlcmd5SW50b2xlcmFuY2U+KToKICBhbGxlcmd5SW50b2xlcmFuY2VzIEEKICAgIHdoZXJlIEEuY2xpbmljYWxTdGF0dXMgfiAiYWxsZXJneS1pbmFjdGl2ZSIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNBbGxlcmd5UmVzb2x2ZWQoYWxsZXJneUludG9sZXJhbmNlIEFsbGVyZ3lJbnRvbGVyYW5jZSk6CiAgYWxsZXJneUludG9sZXJhbmNlLmNsaW5pY2FsU3RhdHVzIH4gImFsbGVyZ3ktcmVzb2x2ZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGFsbGVyZ3lSZXNvbHZlZChhbGxlcmd5SW50b2xlcmFuY2VzIExpc3Q8QWxsZXJneUludG9sZXJhbmNlPik6CiAgYWxsZXJneUludG9sZXJhbmNlcyBBCiAgICB3aGVyZSBBLmNsaW5pY2FsU3RhdHVzIH4gImFsbGVyZ3ktcmVzb2x2ZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzQWxsZXJneUNvbmZpcm1lZChhbGxlcmd5SW50b2xlcmFuY2UgQWxsZXJneUludG9sZXJhbmNlKToKICBhbGxlcmd5SW50b2xlcmFuY2UudmVyaWZpY2F0aW9uU3RhdHVzIH4gImFsbGVyZ3ktY29uZmlybWVkIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBhbGxlcmd5Q29uZmlybWVkKGFsbGVyZ3lJbnRvbGVyYW5jZXMgTGlzdDxBbGxlcmd5SW50b2xlcmFuY2U+KToKICBhbGxlcmd5SW50b2xlcmFuY2VzIEEKICAgIHdoZXJlIEEudmVyaWZpY2F0aW9uU3RhdHVzIH4gImFsbGVyZ3ktY29uZmlybWVkIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0FsbGVyZ3lVbmNvbmZpcm1lZChhbGxlcmd5SW50b2xlcmFuY2UgQWxsZXJneUludG9sZXJhbmNlKToKICBhbGxlcmd5SW50b2xlcmFuY2UudmVyaWZpY2F0aW9uU3RhdHVzIH4gImFsbGVyZ3ktdW5jb25maXJtZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGFsbGVyZ3lVbmNvbmZpcm1lZChhbGxlcmd5SW50b2xlcmFuY2VzIEFsbGVyZ3lJbnRvbGVyYW5jZSk6CiAgYWxsZXJneUludG9sZXJhbmNlcyBBCiAgICB3aGVyZSBBLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJhbGxlcmd5LXVuY29uZmlybWVkIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0FsbGVyZ3lSZWZ1dGVkKGFsbGVyZ3lJbnRvbGVyYW5jZSBBbGxlcmd5SW50b2xlcmFuY2UpOgogIGFsbGVyZ3lJbnRvbGVyYW5jZS52ZXJpZmljYXRpb25TdGF0dXMgfiAiYWxsZXJneS1yZWZ1dGVkIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBhbGxlcmd5UmVmdXRlZChhbGxlcmd5SW50b2xlcmFuY2VzIEFsbGVyZ3lJbnRvbGVyYW5jZSk6CiAgYWxsZXJneUludG9sZXJhbmNlcyBBCiAgICB3aGVyZSBBLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJhbGxlcmd5LXJlZnV0ZWQiCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gY29uZGl0aW9uIGhhcyB0aGUgZ2l2ZW4gY2F0ZWdvcnkKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNDYXRlZ29yeShjb25kaXRpb24gQ29uZGl0aW9uLCBjYXRlZ29yeSBDb2RlKToKICBleGlzdHMgKGNvbmRpdGlvbi5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gY2F0ZWdvcnkKICApCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gY29uZGl0aW9uIGlzIGEgcHJvYmxlbSBsaXN0IGl0ZW0uCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNQcm9ibGVtTGlzdEl0ZW0oY29uZGl0aW9uIENvbmRpdGlvbik6CiAgZXhpc3RzIChjb25kaXRpb24uY2F0ZWdvcnkgQwogICAgd2hlcmUgQyB+ICJwcm9ibGVtLWxpc3QtaXRlbSIKICApCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gY29uZGl0aW9uIGlzIGFuIGVuY291bnRlciBkaWFnbm9zaXMKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0VuY291bnRlckRpYWdub3Npcyhjb25kaXRpb24gQ29uZGl0aW9uKToKICBleGlzdHMgKGNvbmRpdGlvbi5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gImVuY291bnRlci1kaWFnbm9zaXMiCiAgKQoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIGNvbmRpdGlvbiBpcyBhIGhlYWx0aCBjb25jZXJuCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNIZWFsdGhDb25jZXJuKGNvbmRpdGlvbiBDb25kaXRpb24pOgogIGV4aXN0cyAoY29uZGl0aW9uLmNhdGVnb3J5IEMKICAgIHdoZXJlIEMgfiAiaGVhbHRoLWNvbmNlcm4iCiAgKQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc1VuY29uZmlybWVkKGNvbmRpdGlvbiBDb25kaXRpb24pOgogIGNvbmRpdGlvbi52ZXJpZmljYXRpb25TdGF0dXMgfiAidW5jb25maXJtZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIHVuY29uZmlybWVkKGNvbmRpdGlvbnMgTGlzdDxDb25kaXRpb24+KToKICBjb25kaXRpb25zIEMKICAgIHdoZXJlIEMudmVyaWZpY2F0aW9uU3RhdHVzIH4gInVuY29uZmlybWVkIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc1Byb3Zpc2lvbmFsKGNvbmRpdGlvbiBDb25kaXRpb24pOgogIGNvbmRpdGlvbi52ZXJpZmljYXRpb25TdGF0dXMgfiAicHJvdmlzaW9uYWwiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIHByb3Zpc2lvbmFsKGNvbmRpdGlvbnMgTGlzdDxDb25kaXRpb24+KToKICBjb25kaXRpb25zIEMKICAgIHdoZXJlIEMudmVyaWZpY2F0aW9uU3RhdHVzIH4gInByb3Zpc2lvbmFsIgoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0RpZmZlcmVudGlhbChjb25kaXRpb24gQ29uZGl0aW9uKToKICBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gImRpZmZlcmVudGlhbCIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gZGlmZmVyZW50aWFsKGNvbmRpdGlvbnMgTGlzdDxDb25kaXRpb24+KToKICBjb25kaXRpb25zIEMKICAgIHdoZXJlIEMudmVyaWZpY2F0aW9uU3RhdHVzIH4gImRpZmZlcmVudGlhbCIKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNDb25maXJtZWQoY29uZGl0aW9uIENvbmRpdGlvbik6CiAgY29uZGl0aW9uLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJjb25maXJtZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGNvbmZpcm1lZChjb25kaXRpb25zIExpc3Q8Q29uZGl0aW9uPik6CiAgY29uZGl0aW9ucyBDCiAgICB3aGVyZSBDLnZlcmlmaWNhdGlvblN0YXR1cyB+ICJjb25maXJtZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGlzUmVmdXRlZChjb25kaXRpb24gQ29uZGl0aW9uKToKICBjb25kaXRpb24udmVyaWZpY2F0aW9uU3RhdHVzIH4gInJlZnV0ZWQiCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIHJlZnV0ZWQoY29uZGl0aW9ucyBMaXN0PENvbmRpdGlvbj4pOgogIGNvbmRpdGlvbnMgQwogICAgd2hlcmUgQy52ZXJpZmljYXRpb25TdGF0dXMgfiAicmVmdXRlZCIKCi8qCkBkZXNjcmlwdGlvbjogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBvYnNlcnZhdGlvbiBoYXMgdGhlIGdpdmVuIGNhdGVnb3J5CiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaGFzQ2F0ZWdvcnkob2JzZXJ2YXRpb24gT2JzZXJ2YXRpb24sIGNhdGVnb3J5IENvZGUpOgogIGV4aXN0cyAob2JzZXJ2YXRpb24uY2F0ZWdvcnkgQwogICAgd2hlcmUgQyB+IGNhdGVnb3J5CiAgKQoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIG9ic2VydmF0aW9uIGlzIGEgbGFib3JhdG9yeSByZXN1bHQuCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNMYWJvcmF0b3J5UmVzdWx0KG9ic2VydmF0aW9uIE9ic2VydmF0aW9uKToKICBleGlzdHMgKG9ic2VydmF0aW9uLmNhdGVnb3J5IEMKICAgIHdoZXJlIEMgfiAibGFib3JhdG9yeSIKICApCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gb2JzZXJ2YXRpb24gaXMgYSBsYWJvcmF0b3J5IHJlc3VsdC4KKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc1ZpdGFsU2lnbihvYnNlcnZhdGlvbiBPYnNlcnZhdGlvbik6CiAgZXhpc3RzIChvYnNlcnZhdGlvbi5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gInZpdGFsLXNpZ25zIgogICkKCi8qCkBkZXNjcmlwdGlvbjogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBvYnNlcnZhdGlvbiBoYXMgc3RhdHVzCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNSZXN1bHRlZChvYnNlcnZhdGlvbiBPYnNlcnZhdGlvbik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWZpbmFsIi5jb2RlCiAgICBvciBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQogICAgb3Igb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWNvcnJlY3RlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiByZXN1bHRlZChvYnNlcnZhdGlvbnMgTGlzdDxPYnNlcnZhdGlvbj4pOgogIG9ic2VydmF0aW9ucyBvYnNlcnZhdGlvbgogICAgd2hlcmUgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWZpbmFsIi5jb2RlCiAgICAgIG9yIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1hbWVuZGVkIi5jb2RlCiAgICAgIG9yIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1jb3JyZWN0ZWQiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNGaW5hbChvYnNlcnZhdGlvbiBPYnNlcnZhdGlvbik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWZpbmFsIi5jb2RlCgpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIGZpbmFsKG9ic2VydmF0aW9ucyBMaXN0PE9ic2VydmF0aW9uPik6CiAgb2JzZXJ2YXRpb25zIG9ic2VydmF0aW9uCiAgICB3aGVyZSBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tZmluYWwiLmNvZGUKCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNBbWVuZGVkKG9ic2VydmF0aW9uIE9ic2VydmF0aW9uKToKICBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBhbWVuZGVkKG9ic2VydmF0aW9ucyBMaXN0PE9ic2VydmF0aW9uPik6CiAgb2JzZXJ2YXRpb25zIG9ic2VydmF0aW9uCiAgICB3aGVyZSBvYnNlcnZhdGlvbi5zdGF0dXMgfiAib2JzZXJ2YXRpb24tYW1lbmRlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0NvcnJlY3RlZChvYnNlcnZhdGlvbiBPYnNlcnZhdGlvbik6CiAgb2JzZXJ2YXRpb24uc3RhdHVzIH4gIm9ic2VydmF0aW9uLWNvcnJlY3RlZCIuY29kZQoKZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBjb3JyZWN0ZWQob2JzZXJ2YXRpb25zIExpc3Q8T2JzZXJ2YXRpb24+KToKICBvYnNlcnZhdGlvbnMgb2JzZXJ2YXRpb24KICAgIHdoZXJlIG9ic2VydmF0aW9uLnN0YXR1cyB+ICJvYnNlcnZhdGlvbi1jb3JyZWN0ZWQiLmNvZGUKCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gTWVkaWNhdGlvblJlcXVlc3QgaGFzIGEgY2F0ZWdvcnkgb2YgQ29tbXVuaXR5CiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gaXNDb21tdW5pdHkobWVkaWNhdGlvblJlcXVlc3QgTWVkaWNhdGlvblJlcXVlc3QpOgogIGV4aXN0cyAobWVkaWNhdGlvblJlcXVlc3QuY2F0ZWdvcnkgQwogICAgd2hlcmUgQyB+IENvbW11bml0eQogICkKCi8qCkBkZXNjcmlwdGlvbjogUmV0dXJucyB0cnVlIGlmIHRoZSBnaXZlbiBNZWRpY2F0aW9uUmVxdWVzdCBoYXMgYSBjYXRlZ29yeSBvZiBEaXNjaGFyZ2UKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBpc0Rpc2NoYXJnZShtZWRpY2F0aW9uUmVxdWVzdCBNZWRpY2F0aW9uUmVxdWVzdCk6CiAgZXhpc3RzIChtZWRpY2F0aW9uUmVxdWVzdC5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gRGlzY2hhcmdlCiAgKQoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIE1lZGljYXRpb25SZXF1ZXN0IGhhcyB0aGUgZ2l2ZW4gY2F0ZWdvcnkKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNDYXRlZ29yeShtZWRpY2F0aW9uUmVxdWVzdCBNZWRpY2F0aW9uUmVxdWVzdCwgY2F0ZWdvcnkgQ29kZSk6CiAgZXhpc3RzIChtZWRpY2F0aW9uUmVxdWVzdC5jYXRlZ29yeSBDCiAgICB3aGVyZSBDIH4gY2F0ZWdvcnkKICApCgovKgpAZGVzY3JpcHRpb246IE5vcm1hbGl6ZXMgYSB2YWx1ZSB0aGF0IGlzIGEgY2hvaWNlIG9mIHRpbWluZy12YWx1ZWQgdHlwZXMgdG8gYW4gZXF1aXZhbGVudCBpbnRlcnZhbApAY29tbWVudDogTm9ybWFsaXplcyBhIGNob2ljZSB0eXBlIG9mIERhdGVUaW1lLCBRdWFuaXR0eSwgSW50ZXJ2YWw8RGF0ZVRpbWU+LCBvciBJbnRlcnZhbDxRdWFudGl0eT4gdHlwZXMKdG8gYW4gZXF1aXZhbGVudCBpbnRlcnZhbC4gVGhpcyBzZWxlY3Rpb24gb2YgY2hvaWNlIHR5cGVzIGlzIGEgc3VwZXJzZXQgb2YgdGhlIG1ham9yaXR5IG9mIGNob2ljZSB0eXBlcyB0aGF0IGFyZSB1c2VkIGFzIHBvc3NpYmxlCnJlcHJlc2VudGF0aW9ucyBmb3IgdGltaW5nLXZhbHVlZCBlbGVtZW50cyBpbiBRSUNvcmUsIGFsbG93aW5nIHRoaXMgZnVuY3Rpb24gdG8gYmUgdXNlZCBhY3Jvc3MgYW55IHJlc291cmNlLgpUaGUgaW5wdXQgY2FuIGJlIHByb3ZpZGVkIGFzIGEgRGF0ZVRpbWUsIFF1YW50aXR5LCBJbnRlcnZhbDxEYXRlVGltZT4gb3IgSW50ZXJ2YWw8UXVhbnRpdHk+LgpUaGUgaW50ZW50IG9mIHRoaXMgZnVuY3Rpb24gaXMgdG8gcHJvdmlkZSBhIGNsZWFyIGFuZCBjb25jaXNlIG1lY2hhbmlzbSB0byB0cmVhdCBzaW5nbGUKZWxlbWVudHMgdGhhdCBoYXZlIG11bHRpcGxlIHBvc3NpYmxlIHJlcHJlc2VudGF0aW9ucyBhcyBpbnRlcnZhbHMgc28gdGhhdCBsb2dpYyBkb2Vzbid0IGhhdmUgdG8gYWNjb3VudApmb3IgdGhlIHZhcmlhYmlsaXR5LiBNb3JlIGNvbXBsZXggY2FsY3VsYXRpb25zIChzdWNoIGFzIG1lZGljYXRpb24gcmVxdWVzdCBwZXJpb2Qgb3IgZGlzcGVuc2UgcGVyaW9kCmNhbGN1bGF0aW9uKSBuZWVkIHNwZWNpZmljIGd1aWRhbmNlIGFuZCBjb25zaWRlcmF0aW9uLiBUaGF0IGd1aWRhbmNlIG1heSBtYWtlIHVzZSBvZiB0aGlzIGZ1bmN0aW9uLCBidXQKdGhlIGZvY3VzIG9mIHRoaXMgZnVuY3Rpb24gaXMgb24gc2luZ2xlIGVsZW1lbnQgY2FsY3VsYXRpb25zIHdoZXJlIHRoZSBzZW1hbnRpY3MgYXJlIHVuYW1iaWd1b3VzLgpJZiB0aGUgaW5wdXQgaXMgYSBEYXRlVGltZSwgdGhlIHJlc3VsdCBhIERhdGVUaW1lIEludGVydmFsIGJlZ2lubmluZyBhbmQgZW5kaW5nIG9uIHRoYXQgRGF0ZVRpbWUuCklmIHRoZSBpbnB1dCBpcyBhIFF1YW50aXR5LCB0aGUgcXVhbnRpdHkgaXMgZXhwZWN0ZWQgdG8gYmUgYSBjYWxlbmRhci1kdXJhdGlvbiBpbnRlcnByZXRlZCBhcyBhbiBBZ2UsCmFuZCB0aGUgcmVzdWx0IGlzIGEgRGF0ZVRpbWUgSW50ZXJ2YWwgYmVnaW5uaW5nIG9uIHRoZSBEYXRlIHRoZSBwYXRpZW50IHR1cm5lZCB0aGF0IGFnZSBhbmQgZW5kaW5nIGltbWVkaWF0ZWx5IGJlZm9yZSBvbmUgeWVhciBsYXRlci4KSWYgdGhlIGlucHV0IGlzIGEgRGF0ZVRpbWUgSW50ZXJ2YWwsIHRoZSByZXN1bHQgaXMgdGhlIGlucHV0LgpJZiB0aGUgaW5wdXQgaXMgYSBRdWFudGl0eSBJbnRlcnZhbCwgdGhlIHF1YW50aXRpZXMgYXJlIGV4cGVjdGVkIHRvIGJlIGNhbGVuZGFyLWR1cmF0aW9ucyBpbnRlcnByZXRlZCBhcyBhbiBBZ2UsIGFuZCB0aGUgcmVzdWx0CmlzIGEgRGF0ZVRpbWUgSW50ZXJ2YWwgYmVnaW5uaW5nIG9uIHRoZSBkYXRlIHRoZSBwYXRpZW50IHR1cm5lZCB0aGUgYWdlIGdpdmVuIGFzIHRoZSBzdGFydCBvZiB0aGUgcXVhbnRpdHkgaW50ZXJ2YWwsIGFuZCBlbmRpbmcKaW1tZWRpYXRlbHkgYmVmb3JlIG9uZSB5ZWFyIGxhdGVyIHRoYW4gdGhlIGRhdGUgdGhlIHBhdGllbnQgdHVybmVkIHRoZSBhZ2UgZ2l2ZW4gYXMgdGhlIGVuZCBvZiB0aGUgcXVhbnRpdHkgaW50ZXJ2YWwuCkFueSBvdGhlciBpbnB1dCB3aWxsIHJlc2x0IGluIGEgbnVsbCBEYXRlVGltZSBJbnRlcnZhbAoqLwpkZWZpbmUgZmx1ZW50IGZ1bmN0aW9uIHRvSW50ZXJ2YWwoY2hvaWNlIENob2ljZTxEYXRlVGltZSwgUXVhbnRpdHksIEludGVydmFsPERhdGVUaW1lPiwgSW50ZXJ2YWw8UXVhbnRpdHk+Pik6CiAgY2FzZQoJICB3aGVuIGNob2ljZSBpcyBEYXRlVGltZSB0aGVuCiAgICAJSW50ZXJ2YWxbY2hvaWNlIGFzIERhdGVUaW1lLCBjaG9pY2UgYXMgRGF0ZVRpbWVdCgkJd2hlbiBjaG9pY2UgaXMgSW50ZXJ2YWw8RGF0ZVRpbWU+IHRoZW4KICAJCWNob2ljZSBhcyBJbnRlcnZhbDxEYXRlVGltZT4KCQl3aGVuIGNob2ljZSBpcyBRdWFudGl0eSB0aGVuCgkJICBJbnRlcnZhbFtQYXRpZW50LmJpcnRoRGF0ZSArIChjaG9pY2UgYXMgUXVhbnRpdHkpLAoJCQkgIFBhdGllbnQuYmlydGhEYXRlICsgKGNob2ljZSBhcyBRdWFudGl0eSkgKyAxIHllYXIpCgkJd2hlbiBjaG9pY2UgaXMgSW50ZXJ2YWw8UXVhbnRpdHk+IHRoZW4KCQkgIEludGVydmFsW1BhdGllbnQuYmlydGhEYXRlICsgKGNob2ljZS5sb3cgYXMgUXVhbnRpdHkpLAoJCQkgIFBhdGllbnQuYmlydGhEYXRlICsgKGNob2ljZS5oaWdoIGFzIFF1YW50aXR5KSArIDEgeWVhcikKCQllbHNlCgkJCW51bGwgYXMgSW50ZXJ2YWw8RGF0ZVRpbWU+CgllbmQKCi8qCkBkZXNjcmlwdGlvbjogUmV0dXJucyBhbiBpbnRlcnZhbCByZXByZXNlbnRpbmcgdGhlIG5vcm1hbGl6ZWQgYWJhdGVtZW50IG9mIGEgZ2l2ZW4gQ29uZGl0aW9uLgpAY29tbWVudDogSWYgdGhlIGFiYXRlbWVudCBlbGVtZW50IG9mIHRoZSBDb25kaXRpb24gaXMgcmVwcmVzZW50ZWQgYXMgYSBEYXRlVGltZSwgdGhlIHJlc3VsdAppcyBhbiBpbnRlcnZhbCBiZWdpbm5pbmcgYW5kIGVuZGluZyBvbiB0aGF0IERhdGVUaW1lLgpJZiB0aGUgYWJhdGVtZW50IGlzIHJlcHJlc2VudGVkIGFzIGEgUXVhbnRpdHksIHRoZSBxdWFudGl0eSBpcyBleHBlY3RlZCB0byBiZSBhIGNhbGVuZGFyLWR1cmF0aW9uIGFuZCBpcyBpbnRlcnByZXRlZCBhcyB0aGUgYWdlIG9mIHRoZSBwYXRpZW50LiBUaGUKcmVzdWx0IGlzIGFuIGludGVydmFsIGZyb20gdGhlIGRhdGUgdGhlIHBhdGllbnQgdHVybmVkIHRoYXQgYWdlIHRvIGltbWVkaWF0ZWx5IGJlZm9yZSBvbmUgeWVhciBsYXRlci4KSWYgdGhlIGFiYXRlbWVudCBpcyByZXByZXNlbnRlZCBhcyBhIFF1YW50aXR5IEludGVydmFsLCB0aGUgcXVhbnRpdGllcyBhcmUgZXhwZWN0ZWQgdG8gYmUgY2FsZW5kYXItZHVyYXRpb25zIGFuZCBhcmUgaW50ZXJwcmV0ZWQgYXMgYW4gYWdlIHJhbmdlIGR1cmluZwp3aGljaCB0aGUgYWJhdGVtZW50IG9jY3VycmVkLiBUaGUgcmVzdWx0IGlzIGFuIGludGVydmFsIGZyb20gdGhlIGRhdGUgdGhlIHBhdGllbnQgdHVybmVkIHRoZSBzdGFydGluZyBhZ2Ugb2YgdGhlIHF1YW50aXR5IGludGVydmFsLCBhbmQgZW5kaW5nIGltbWVkaWF0ZWx5CmJlZm9yZSBvbmUgeWVhciBsYXRlciB0aGFuIHRoZSBkYXRlIHRoZSBwYXRpZW50IHR1cm5lZCB0aGUgZW5kaW5nIGFnZSBvZiB0aGUgcXVhbnRpdHkgaW50ZXJ2YWwuCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gYWJhdGVtZW50SW50ZXJ2YWwoY29uZGl0aW9uIENvbmRpdGlvbik6CglpZiBjb25kaXRpb24uYWJhdGVtZW50IGlzIEZISVIuZGF0ZVRpbWUgdGhlbgoJICBJbnRlcnZhbFtjb25kaXRpb24uYWJhdGVtZW50IGFzIEZISVIuZGF0ZVRpbWUsIGNvbmRpdGlvbi5hYmF0ZW1lbnQgYXMgRkhJUi5kYXRlVGltZV0KCWVsc2UgaWYgY29uZGl0aW9uLmFiYXRlbWVudCBpcyBGSElSLlF1YW50aXR5IHRoZW4KCQlJbnRlcnZhbFtQYXRpZW50LmJpcnRoRGF0ZSArIChjb25kaXRpb24uYWJhdGVtZW50IGFzIEZISVIuQWdlKSwKCQkJUGF0aWVudC5iaXJ0aERhdGUgKyAoY29uZGl0aW9uLmFiYXRlbWVudCBhcyBGSElSLkFnZSkgKyAxIHllYXIpCgkvLyBlbHNlIGlmIGNvbmRpdGlvbi5hYmF0ZW1lbnQgaXMgSW50ZXJ2YWw8U3lzdGVtLlF1YW50aXR5PiB0aGVuCgkvLyAgIEludGVydmFsW1BhdGllbnQuYmlydGhEYXRlICsgKGNvbmRpdGlvbi5hYmF0ZW1lbnQubG93IGFzIFN5c3RlbS5RdWFudGl0eSksCgkvLyAJICBQYXRpZW50LmJpcnRoRGF0ZSArIChjb25kaXRpb24uYWJhdGVtZW50LmhpZ2ggYXMgU3lzdGVtLlF1YW50aXR5KSArIDEgeWVhcikKCS8vIGVsc2UgaWYgY29uZGl0aW9uLmFiYXRlbWVudCBpcyBJbnRlcnZhbDxEYXRlVGltZT4gdGhlbgoJLy8gICBJbnRlcnZhbFtjb25kaXRpb24uYWJhdGVtZW50LmxvdywgY29uZGl0aW9uLmFiYXRlbWVudC5oaWdoKQoJZWxzZSBudWxsIGFzIEludGVydmFsPERhdGVUaW1lPgoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIGFuIGludGVydmFsIHJlcHJlc2VudGluZyB0aGUgbm9ybWFsaXplZCBwcmV2YWxlbmNlIHBlcmlvZCBvZiBhIGdpdmVuIENvbmRpdGlvbi4KQGNvbW1lbnQ6IFVzZXMgdGhlIHRvSW50ZXJ2YWwgYW5kIGFiYXRlbWVudEludGVydmFsIGZ1bmN0aW9ucyB0byBkZXRlcm1pbmUgdGhlIHdpZGVzdCBwb3RlbnRpYWwgaW50ZXJ2YWwgZnJvbQpvbnNldCB0byBhYmF0ZW1lbnQgYXMgc3BlY2lmaWVkIGluIHRoZSBnaXZlbiBDb25kaXRpb24uIElmIHRoZSBjb25kaXRpb24gaXMgYWN0aXZlLCB0aGUgcmVzdWx0aW5nIGludGVydmFsIHdpbGwgaGF2ZQphIGNsb3NlZCBlbmRpbmcgYm91bmRhcnkuIElmIHRoZSBjb25kaXRpb24gaXMgbm90IGFjdGl2ZSwgdGhlIHJlc3VsdGluZyBpbnRlcnZhbCB3aWxsIGhhdmUgYW4gb3BlbiBlbmRpbmcgYm91bmRhcnkuCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gcHJldmFsZW5jZUludGVydmFsKGNvbmRpdGlvbiBDb25kaXRpb24pOgppZiBjb25kaXRpb24uY2xpbmljYWxTdGF0dXMgfiAiYWN0aXZlIgogIG9yIGNvbmRpdGlvbi5jbGluaWNhbFN0YXR1cyB+ICJyZWN1cnJlbmNlIgogIG9yIGNvbmRpdGlvbi5jbGluaWNhbFN0YXR1cyB+ICJyZWxhcHNlIiB0aGVuCiAgSW50ZXJ2YWxbc3RhcnQgb2YgY29uZGl0aW9uLm9uc2V0LnRvSW50ZXJ2YWwoKSwgZW5kIG9mIGNvbmRpdGlvbi5hYmF0ZW1lbnRJbnRlcnZhbCgpXQplbHNlCiAgSW50ZXJ2YWxbc3RhcnQgb2YgY29uZGl0aW9uLm9uc2V0LnRvSW50ZXJ2YWwoKSwgZW5kIG9mIGNvbmRpdGlvbi5hYmF0ZW1lbnRJbnRlcnZhbCgpKQoKLyoKQGRlc2NyaXB0aW9uOiBSZXR1cm5zIHRoZSB0YWlsIG9mIHRoZSBnaXZlbiB1cmkgKGkuZS4gZXZlcnl0aGluZyBhZnRlciB0aGUgbGFzdCBzbGFzaCBpbiB0aGUgVVJJKS4KQGNvbW1lbnQ6IFRoaXMgZnVuY3Rpb24gY2FuIGJlIHVzZWQgdG8gZGV0ZXJtaW5lIHRoZSBsb2dpY2FsIGlkIG9mIGEgZ2l2ZW4gcmVzb3VyY2UuIEl0IGNhbiBiZSB1c2VkIGluCmEgc2luZ2xlLXNlcnZlciBlbnZpcm9ubWVudCB0byB0cmFjZSByZWZlcmVuY2VzLiBIb3dldmVyLCB0aGlzIGZ1bmN0aW9uIGRvZXMgbm90IGF0dGVtcHQgdG8gcmVzb2x2ZQpvciBkaXN0aW5ndWlzaCB0aGUgYmFzZSBvZiB0aGUgZ2l2ZW4gdXJsLCBhbmQgc28gY2Fubm90IGJlIHVzZWQgc2FmZWx5IGluIG11bHRpLXNlcnZlciBlbnZpcm9ubWVudHMuCiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gZ2V0SWQodXJpIFN0cmluZyk6CiAgTGFzdChTcGxpdCh1cmksICcvJykpCgovKgpAZGVzY3JpcHRpb246IEdpdmVuIGFuIGludGVydmFsLCByZXR1cm4gdHJ1ZSBpZiB0aGUgaW50ZXJ2YWwgaGFzIGEgc3RhcnRpbmcgYm91bmRhcnkgc3BlY2lmaWVkCihpLmUuIHRoZSBzdGFydCBvZiB0aGUgaW50ZXJ2YWwgaXMgbm90IG51bGwgYW5kIG5vdCB0aGUgbWluaW11bSBEYXRlVGltZSB2YWx1ZSkKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNTdGFydChwZXJpb2QgSW50ZXJ2YWw8RGF0ZVRpbWU+ICk6CiAgbm90ICggc3RhcnQgb2YgcGVyaW9kIGlzIG51bGwKICAgICAgb3Igc3RhcnQgb2YgcGVyaW9kID0gbWluaW11bSBEYXRlVGltZQogICkKCi8qCkBkZXNjcmlwdGlvbjogR2l2ZW4gYW4gaW50ZXJ2YWwsIHJldHVybnMgdHJ1ZSBpZiB0aGUgaW50ZXJ2YWwgaGFzIGFuIGVuZGluZyBib3VuZGFyeSBzcGVjaWZpZWQKKGkuZS4gdGhlIGVuZCBvZiB0aGUgaW50ZXJ2YWwgaXMgbm90IG51bGwgYW5kIG5vdCB0aGUgbWF4aW11bSBEYXRlVGltZSB2YWx1ZSkKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBoYXNFbmQocGVyaW9kIEludGVydmFsPERhdGVUaW1lPiApOgogIG5vdCAoCiAgICBlbmQgb2YgcGVyaW9kIGlzIG51bGwKICAgICAgb3IgZW5kIG9mIHBlcmlvZCA9IG1heGltdW0gRGF0ZVRpbWUKICApCgovKgpAZGVzY3JpcHRpb246IEdpdmVuIGFuIGludGVydmFsLCByZXR1cm5zIHRoZSBlbmRpbmcgcG9pbnQgaWYgdGhlIGludGVydmFsIGhhcyBhbiBlbmRpbmcgYm91bmRhcnkgc3BlY2lmaWVkLApvdGhlcndpc2UsIHJldHVybnMgdGhlIHN0YXJ0aW5nIHBvaW50CiovCmRlZmluZSBmbHVlbnQgZnVuY3Rpb24gbGF0ZXN0KGNob2ljZSBDaG9pY2U8RGF0ZVRpbWUsIFF1YW50aXR5LCBJbnRlcnZhbDxEYXRlVGltZT4sIEludGVydmFsPFF1YW50aXR5Pj4gKToKICAoY2hvaWNlLnRvSW50ZXJ2YWwoKSkgcGVyaW9kCiAgICByZXR1cm4KICAgICAgaWYgKHBlcmlvZC5oYXNFbmQoKSkgdGhlbiBlbmQgb2YgcGVyaW9kCiAgICAgIGVsc2Ugc3RhcnQgb2YgcGVyaW9kCgovKgpAZGVzY3JpcHRpb246IEdpdmVuIGFuIGludGVydmFsLCByZXR1cm4gdGhlIHN0YXJ0aW5nIHBvaW50IGlmIHRoZSBpbnRlcnZhbCBoYXMgYSBzdGFydGluZyBib3VuZGFyeSBzcGVjaWZpZWQsCm90aGVyd2lzZSwgcmV0dXJuIHRoZSBlbmRpbmcgcG9pbnQKKi8KZGVmaW5lIGZsdWVudCBmdW5jdGlvbiBlYXJsaWVzdChjaG9pY2UgQ2hvaWNlPERhdGVUaW1lLCBRdWFudGl0eSwgSW50ZXJ2YWw8RGF0ZVRpbWU+LCBJbnRlcnZhbDxRdWFudGl0eT4+ICk6CiAgKGNob2ljZS50b0ludGVydmFsKCkpIHBlcmlvZAogICAgcmV0dXJuCiAgICAgIGlmIChwZXJpb2QuaGFzU3RhcnQoKSkgdGhlbiBzdGFydCBvZiBwZXJpb2QKICAgICAgZWxzZSBlbmQgb2YgcGVyaW9kCgovKgpAZGVzY3JpcHRpb246IFJldHVybnMgdGhlIG1vc3QgcmVjZW50IENvbmRpdGlvbgoqLwpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChjb25kaXRpb25zIExpc3Q8Q29uZGl0aW9uPik6CiAgTGFzdCgKICAgIGNvbmRpdGlvbnMgQwogICAgICBzb3J0IGJ5IHJlY29yZGVkRGF0ZQogICkKCi8qCkBkZXNjcmlwdGlvbjogUmV0dXJuIHRoZSBtb3N0IHJlY2VudCBPYnNlcnZhdGlvbgoqLwpkZWZpbmUgZnVuY3Rpb24gTW9zdFJlY2VudChvYnNlcnZhdGlvbnMgTGlzdDxPYnNlcnZhdGlvbj4pOgogIExhc3QoCiAgICBvYnNlcnZhdGlvbnMgTwogICAgICBzb3J0IGJ5IGlzc3VlZAogICkKCmRlZmluZSBmdW5jdGlvbiBNb3N0UmVjZW50TVIobWVkaWNhdGlvblJlcXVlc3RzIExpc3Q8Ik1lZGljYXRpb25SZXF1ZXN0Ij4pOgogIExhc3QoCiAgICBtZWRpY2F0aW9uUmVxdWVzdHMgTVIKICAgICAgc29ydCBieSBhdXRob3JlZE9uCiAgKQoKZGVmaW5lIGZ1bmN0aW9uIE1vc3RSZWNlbnRTUihzZXJ2aWNlUmVxdWVzdHMgTGlzdDxGSElSLlNlcnZpY2VSZXF1ZXN0Pik6CiAgTGFzdCgKICAgIHNlcnZpY2VSZXF1ZXN0cyBTUgogICAgICBzb3J0IGJ5IChGSElSSGVscGVycy5Ub0RhdGVUaW1lKGF1dGhvcmVkT24pIGFzIERhdGVUaW1lKQogICkKCgpkZWZpbmUgZnVuY3Rpb24gTW9iaWxlKGNvbnRhY3RQb2ludHMgTGlzdDxDb250YWN0UG9pbnQ+KToKICBzaW5nbGV0b24gZnJvbSAoY29udGFjdFBvaW50cyBQIHdoZXJlIFAudXNlID0gJ21vYmlsZScpCgo="
  } ]
}