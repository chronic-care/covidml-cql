{"resourceType":"Bundle","id":"Questionnaire-phq-9-questionnaire-bundle","type":"transaction","entry":[{"resource":{"resourceType":"Library","id":"PHQ9Logic","extension":[{"url":"http://hl7.org/fhir/us/cqfmeasures/StructureDefinition/cqfm-softwaresystem","valueReference":{"reference":"Device/cqf-tooling"}}],"url":"http://somewhere.org/fhir/uv/mycontentig/Library/PHQ9Logic","version":"0.1.0","name":"PHQ9Logic","title":"PHQ-9 Depression Scoring Logic","status":"draft","experimental":true,"type":{"coding":[{"system":"http://terminology.hl7.org/CodeSystem/library-type","code":"logic-library"}]},"subjectCodeableConcept":{"coding":[{"system":"http://hl7.org/fhir/resource-types","code":"Patient"}]},"description":"Example library illustrating basic CQL constructs","content":[{"contentType":"text/cql","data":"bGlicmFyeSBQSFE5TG9naWMKCnVzaW5nIEZISVIgdmVyc2lvbiAnNC4wLjEnCgppbmNsdWRlIEZISVJIZWxwZXJzIHZlcnNpb24gJzQuMC4xJwoKY29kZXN5c3RlbSAiTE9JTkMiOiAnaHR0cDovL2xvaW5jLm9yZycKCmNvZGUgIk5vdCBhdCBhbGwiOiAnTEE2NTY4LTUnIGZyb20gIkxPSU5DIgpjb2RlICJTZXZlcmFsIGRheXMiOiAnTEE2NTY5LTMnIGZyb20gIkxPSU5DIgpjb2RlICJNb3JlIHRoYW4gaGFsZiB0aGUgZGF5cyI6ICdMQTY1NzAtMScgZnJvbSAiTE9JTkMiCmNvZGUgIk5lYXJseSBldmVyeSBkYXkiOiAnTEE2NTcxLTknIGZyb20gIkxPSU5DIgoKcGFyYW1ldGVyIHJlc3BvbnNlIFF1ZXN0aW9ubmFpcmVSZXNwb25zZQoKY29udGV4dCBQYXRpZW50CgpkZWZpbmUgUXVlc3Rpb25uYWlyZVJlc3BvbnNlczogW1F1ZXN0aW9ubmFpcmVSZXNwb25zZV0KCi8vIFVzZSB0aGUgUXVlc3Rpb25uYWlyZVJlc3BvbnNlIHByb3ZpZGVkIGFzIGEgcGFyYW1ldGVyIGlmIGF2YWlsYWJsZQovLyBPdGhlcndpc2UgbG9vayBpdCB1cCBmcm9tIHRoZSByZWNvcmQKZGVmaW5lICJRdWVzdGlvbm5haXJlUmVzcG9uc2UiOgogIGlmIHJlc3BvbnNlIGlzIG5vdCBudWxsIHRoZW4KICAgIHJlc3BvbnNlCiAgZWxzZQogICAgTGFzdCgKICAgICAgW1F1ZXN0aW9ubmFpcmVSZXNwb25zZV0gUVIKICAgICAgICB3aGVyZSBRUi5xdWVzdGlvbm5haXJlID0gJ2h0dHA6Ly9zb21ld2hlcmUub3JnL2ZoaXIvdXYvbXljb250ZW50aWcvUXVlc3Rpb25uYWlyZS9waHEtOS1xdWVzdGlvbm5haXJlJwogICAgICAgIHNvcnQgYnkgKGF1dGhvcmVkIGFzIEZISVIuZGF0ZVRpbWUpIGRlc2MKICAgICkKCi8vIE5PVEU6IFRoaXMgdGllcyB0aGlzIGxvZ2ljIGRpcmVjdGx5IHRvIHRoaXMgcGFydGljdWxhciByZW5kZXJpbmcgb2YgdGhlIFF1ZXN0aW9ubmFpcmUuCi8vIElkZWFsbHkgdGhlIGl0ZW1zIHdvdWxkIGJlIGZpbHRlcmVkIGJhc2VkIG9uIENvZGUgb2YgdGhlIEl0ZW0sIHJhdGhlciB0aGFuIHRoZSBMaW5rSWQsCi8vIGJ1dCB0aGF0IHdvdWxkIHJlcXVpcmUgcHVsbGluZyBpbiB0aGUgUXVlc3Rpb25uYWlyZSBiZWNhdXNlIHRoZSBRdWVzdGlvbm5haXJlUmVzcG9uc2UKLy8gb25seSBoYXMgdGhlIExpbmtJZC4KZGVmaW5lICJSZXNwb25zZXMiOgogICJRdWVzdGlvbm5haXJlUmVzcG9uc2UiIFFSCiAgICByZXR1cm4gUVIuaXRlbSBJIHdoZXJlIEkubGlua0lkIGluIHsKICAgICAgJ0xpdHRsZUludGVyZXN0JywKICAgICAgJ0ZlZWxpbmdEb3duJywKICAgICAgJ1Ryb3VibGVTbGVlcGluZycsCiAgICAgICdGZWVsaW5nVGlyZWQnLAogICAgICAnQmFkQXBldGl0ZScsCiAgICAgICdGZWVsaW5nQmFkQWJvdXRTZWxmJywKICAgICAgJ1Ryb3VibGVDb25jZXRyYXRpbmcnLAogICAgICAnTW92aW5nU3BlYWtpbmcnCiAgICB9CgovKgpAc291cmNlOiBodHRwczovL3d3dy5tZWQudW1pY2guZWR1LzFpbmZvL0ZIUC9wcmFjdGljZWd1aWRlcy9kZXByZXNzL3Njb3JlLnBkZgoqLwpkZWZpbmUgZnVuY3Rpb24gIkFuc3dlckNhcmRpbmFsaXR5IihhbnN3ZXIgQ29kaW5nKToKICBjYXNlCiAgICB3aGVuIGFuc3dlciB+ICJOb3QgYXQgYWxsIiB0aGVuIDAKICAgIHdoZW4gYW5zd2VyIH4gIlNldmVyYWwgZGF5cyIgdGhlbiAxCiAgICB3aGVuIGFuc3dlciB+ICJNb3JlIHRoYW4gaGFsZiB0aGUgZGF5cyIgdGhlbiAyCiAgICB3aGVuIGFuc3dlciB+ICJOZWFybHkgZXZlcnkgZGF5IiB0aGVuIDMKICAgIGVsc2UgbnVsbAogIGVuZAoKZGVmaW5lICJDYWxjdWxhdGVUb3RhbFNjb3JlIjoKICBTdW0oIlJlc3BvbnNlcyIgUiByZXR1cm4gYWxsIEFuc3dlckNhcmRpbmFsaXR5KEZpcnN0KFIuYW5zd2VyLnZhbHVlKSkpCg=="}]},"request":{"method":"PUT","url":"Library/PHQ9Logic"}},{"resource":{"resourceType":"Questionnaire","id":"phq-9-questionnaire","meta":{"profile":["http://hl7.org/fhir/StructureDefinition/cqf-questionnaire"]},"text":{"status":"generated","div":"<div xmlns=\"http://www.w3.org/1999/xhtml\">PHQ-9 Questionnaire with dynamic logic</div>"},"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/cqf-library","valueCanonical":"http://somewhere.org/fhir/uv/mycontentig/Library/PHQ9Logic"}],"url":"http://somewhere.org/fhir/uv/mycontentig/Questionnaire/phq-9-questionnaire","identifier":[{"use":"official","value":"phq-9"}],"version":"1.0.0","title":"Patient Health Questionnaire (PHQ-9)","status":"draft","subjectType":["Patient"],"code":[{"system":"http://loinc.org","code":"44249-1","display":"PHQ-9 quick depression assessment panel [Reported.PHQ]"}],"item":[{"linkId":"LittleInterest","code":[{"system":"http://loinc.org","code":"44250-9"}],"text":"Little interest or pleasure in doing things","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"},{"linkId":"FeelingDown","code":[{"system":"http://loinc.org","code":"44255-8"}],"text":"Feeling down, depressed, or hopeless","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"},{"linkId":"TroubleSleeping","code":[{"system":"http://loinc.org","code":"44259-0"}],"text":"Trouble falling or staying asleep","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"},{"linkId":"FeelingTired","code":[{"system":"http://loinc.org","code":"44254-1"}],"text":"Feeling tired or having little energy","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"},{"linkId":"BadAppetite","code":[{"system":"http://loinc.org","code":"44251-7"}],"text":"Poor appetite or overeating","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"},{"linkId":"FeelingBadAboutSelf","code":[{"system":"http://loinc.org","code":"44258-2"}],"text":"Feeling bad about yourself - or that you are a failure or have let yourself or your family down","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"},{"linkId":"TroubleConcentrating","code":[{"system":"http://loinc.org","code":"44252-5"}],"text":"Trouble concentrating on things, such as reading the newspaper or watching television","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"},{"linkId":"MovingSpeaking","code":[{"system":"http://loinc.org","code":"44253-3"}],"text":"Moving or speaking so slowly that other people could have noticed. Or the opposite - being so fidgety or restless that you have been moving around a lot more than usual","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"},{"extension":[{"url":"http://hl7.org/fhir/StructureDefinition/cqf-expression","valueExpression":{"language":"text/cql","expression":"CalculateTotalScore"}}],"linkId":"TotalScore","code":[{"system":"http://loinc.org","code":"44261-6"}],"text":"Total score","type":"integer","required":true},{"linkId":"Difficulty","code":[{"system":"http://loinc.org","code":"44256-6"}],"text":"If you checked off any problems, how difficult have these problems made it for you to do your work, take care of things at home, or get along with other people","type":"choice","required":true,"answerValueSet":"http://loinc.org/vs/LL358-3"}]},"request":{"method":"PUT","url":"Questionnaire/phq-9-questionnaire"}}]}